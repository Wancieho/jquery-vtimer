/*
 * Project: vTimer
 * Description: Configurable event-based jQuery timer
 * Author: https://github.com/Wancieho
 * License: MIT
 * Version: 0.0.2
 * Dependancies: jquery-1.*
 * Date: 10/02/2016
 */
!function(t){"use strict";function i(i,n){this.element=i,this.settings=t.extend({},r,n),this._defaults=r,this._name=s,this.interval=null,this.remaining=null,this.expiresAt=null}function n(){return Math.round((new Date).getTime()/1e3)}function e(){var i=this;i.remaining=i.expiresAt-n(),t(i.element).trigger("update",i.remaining),i.remaining<=0?(t(i.element).trigger("complete"),this.stop()):i.interval=setTimeout(function(){e.apply(i)},1e3)}var s="vTimer",r={duration:0};t.extend(i.prototype,{start:function(){this.stop(),e.apply(this)},stop:function(){this.expiresAt=n()+this.settings.duration,clearInterval(this.interval),this.interval=null}}),t.fn[s]=function(n,e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new i(this,n)),"string"==typeof n&&"function"==typeof t.data(this,"plugin_"+s)[n]&&t.data(this,"plugin_"+s)[n](e)})}}(jQuery);